<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>nfs server stuf :: Tdebian</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Using the csi-driver-nfs from a helm install, creating a storage class, and then a pvc on my nas. The nas and the debian server are plugged into the same switch with cat5e cable so it works out pretty well.
#values.yml customLabels: {} image: baseRepo: registry.k8s.io nfs: repository: registry.k8s.io/sig-storage/nfsplugin tag: v4.11.0 pullPolicy: IfNotPresent csiProvisioner: repository: registry.k8s.io/sig-storage/csi-provisioner tag: v5.2.0 pullPolicy: IfNotPresent csiResizer: repository: registry.k8s.io/sig-storage/csi-resizer tag: v1.13.1 pullPolicy: IfNotPresent csiSnapshotter: repository: registry.k8s.io/sig-storage/csi-snapshotter tag: v8.2.0 pullPolicy: IfNotPresent livenessProbe: repository: registry.k8s.io/sig-storage/livenessprobe tag: v2.15.0 pullPolicy: IfNotPresent nodeDriverRegistrar: repository: registry.k8s.io/sig-storage/csi-node-driver-registrar tag: v2.13.0 pullPolicy: IfNotPresent externalSnapshotter: repository: registry.k8s.io/sig-storage/snapshot-controller tag: v8.2.0 pullPolicy: IfNotPresent serviceAccount: create: true # When true, service accounts will be created for you. Set to false if you want to use your own. controller: csi-nfs-controller-sa # Name of Service Account to be created or used node: csi-nfs-node-sa # Name of Service Account to be created or used rbac: create: true name: nfs driver: name: nfs.csi.k8s.io mountPermissions: 0 feature: enableFSGroupPolicy: true enableInlineVolume: false propagateHostMountOptions: false kubeletDir: /var/lib/kubelet controller: name: csi-nfs-controller replicas: 1 strategyType: Recreate runOnMaster: false runOnControlPlane: false enableSnapshotter: true useTarCommandInSnapshot: false livenessProbe: healthPort: 29652 logLevel: 5 workingMountDir: /tmp dnsPolicy: ClusterFirstWithHostNet # available values: Default, ClusterFirstWithHostNet, ClusterFirst defaultOnDeletePolicy: delete # available values: delete, retain affinity: {} nodeSelector: {} priorityClassName: system-cluster-critical tolerations: - key: &#34;node-role.kubernetes.io/master&#34; operator: &#34;Exists&#34; effect: &#34;NoSchedule&#34; - key: &#34;node-role.kubernetes.io/controlplane&#34; operator: &#34;Exists&#34; effect: &#34;NoSchedule&#34; - key: &#34;node-role.kubernetes.io/control-plane&#34; operator: &#34;Exists&#34; effect: &#34;NoSchedule&#34; - key: &#34;CriticalAddonsOnly&#34; operator: &#34;Exists&#34; effect: &#34;NoSchedule&#34; resources: csiProvisioner: limits: memory: 400Mi requests: cpu: 10m memory: 20Mi csiResizer: limits: memory: 400Mi requests: cpu: 10m memory: 20Mi csiSnapshotter: limits: memory: 200Mi requests: cpu: 10m memory: 20Mi livenessProbe: limits: memory: 100Mi requests: cpu: 10m memory: 20Mi nfs: limits: memory: 200Mi requests: cpu: 10m memory: 20Mi node: name: csi-nfs-node dnsPolicy: ClusterFirstWithHostNet # available values: Default, ClusterFirstWithHostNet, ClusterFirst maxUnavailable: 1 logLevel: 5 livenessProbe: healthPort: 29653 affinity: {} nodeSelector: {} priorityClassName: system-cluster-critical tolerations: - operator: &#34;Exists&#34; resources: livenessProbe: limits: memory: 100Mi requests: cpu: 10m memory: 20Mi nodeDriverRegistrar: limits: memory: 100Mi requests: cpu: 10m memory: 20Mi nfs: limits: memory: 300Mi requests: cpu: 10m memory: 20Mi externalSnapshotter: enabled: false name: snapshot-controller priorityClassName: system-cluster-critical deletionPolicy: Delete controller: replicas: 1 resources: limits: memory: 300Mi requests: cpu: 10m memory: 20Mi # Create volume snapshot CRDs. customResourceDefinitions: enabled: true #if set true, VolumeSnapshot, VolumeSnapshotContent and VolumeSnapshotClass CRDs will be created. Set it false, If they already exist in cluster. ## volumeSnapshotClass resource example: volumeSnapshotClass: create: false name: csi-nfs-snapclass deletionPolicy: Delete ## Reference to one or more secrets to be used when pulling images ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/ ## imagePullSecrets: [] # - name: &#34;image-pull-secret&#34; ## StorageClass resource example: storageClass: create: false # name: nfs-csi # annotations: # storageclass.kubernetes.io/is-default-class: &#34;true&#34; # parameters: # server: nfs-server.default.svc.cluster.local # share: / # subDir: # mountPermissions: &#34;0&#34; # csi.storage.k8s.io/provisioner-secret is only needed for providing mountOptions in DeleteVolume # csi.storage.k8s.io/provisioner-secret-name: &#34;mount-options&#34; # csi.storage.k8s.io/provisioner-secret-namespace: &#34;default&#34; # reclaimPolicy: Delete # volumeBindingMode: Immediate # mountOptions: # - nfsvers=4.1 # sc-nfs.yaml --- apiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: nfs-csi provisioner: nfs.csi.k8s.io parameters: server: x.x.x.x share: /mnt/***/*** reclaimPolicy: Delete volumeBindingMode: Immediate mountOptions: - hard - nfsvers=4.1 - nolock --- " />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="/manifests/nfs/" />







  
  
  
  
  
  <link rel="stylesheet" href="/styles.css">







  <link rel="shortcut icon" href="/img/theme-colors/blue.png">
  <link rel="apple-touch-icon" href="/img/theme-colors/blue.png">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="nfs server stuf">
<meta property="og:description" content="Using the csi-driver-nfs from a helm install, creating a storage class, and then a pvc on my nas. The nas and the debian server are plugged into the same switch with cat5e cable so it works out pretty well.
#values.yml customLabels: {} image: baseRepo: registry.k8s.io nfs: repository: registry.k8s.io/sig-storage/nfsplugin tag: v4.11.0 pullPolicy: IfNotPresent csiProvisioner: repository: registry.k8s.io/sig-storage/csi-provisioner tag: v5.2.0 pullPolicy: IfNotPresent csiResizer: repository: registry.k8s.io/sig-storage/csi-resizer tag: v1.13.1 pullPolicy: IfNotPresent csiSnapshotter: repository: registry.k8s.io/sig-storage/csi-snapshotter tag: v8.2.0 pullPolicy: IfNotPresent livenessProbe: repository: registry.k8s.io/sig-storage/livenessprobe tag: v2.15.0 pullPolicy: IfNotPresent nodeDriverRegistrar: repository: registry.k8s.io/sig-storage/csi-node-driver-registrar tag: v2.13.0 pullPolicy: IfNotPresent externalSnapshotter: repository: registry.k8s.io/sig-storage/snapshot-controller tag: v8.2.0 pullPolicy: IfNotPresent serviceAccount: create: true # When true, service accounts will be created for you. Set to false if you want to use your own. controller: csi-nfs-controller-sa # Name of Service Account to be created or used node: csi-nfs-node-sa # Name of Service Account to be created or used rbac: create: true name: nfs driver: name: nfs.csi.k8s.io mountPermissions: 0 feature: enableFSGroupPolicy: true enableInlineVolume: false propagateHostMountOptions: false kubeletDir: /var/lib/kubelet controller: name: csi-nfs-controller replicas: 1 strategyType: Recreate runOnMaster: false runOnControlPlane: false enableSnapshotter: true useTarCommandInSnapshot: false livenessProbe: healthPort: 29652 logLevel: 5 workingMountDir: /tmp dnsPolicy: ClusterFirstWithHostNet # available values: Default, ClusterFirstWithHostNet, ClusterFirst defaultOnDeletePolicy: delete # available values: delete, retain affinity: {} nodeSelector: {} priorityClassName: system-cluster-critical tolerations: - key: &#34;node-role.kubernetes.io/master&#34; operator: &#34;Exists&#34; effect: &#34;NoSchedule&#34; - key: &#34;node-role.kubernetes.io/controlplane&#34; operator: &#34;Exists&#34; effect: &#34;NoSchedule&#34; - key: &#34;node-role.kubernetes.io/control-plane&#34; operator: &#34;Exists&#34; effect: &#34;NoSchedule&#34; - key: &#34;CriticalAddonsOnly&#34; operator: &#34;Exists&#34; effect: &#34;NoSchedule&#34; resources: csiProvisioner: limits: memory: 400Mi requests: cpu: 10m memory: 20Mi csiResizer: limits: memory: 400Mi requests: cpu: 10m memory: 20Mi csiSnapshotter: limits: memory: 200Mi requests: cpu: 10m memory: 20Mi livenessProbe: limits: memory: 100Mi requests: cpu: 10m memory: 20Mi nfs: limits: memory: 200Mi requests: cpu: 10m memory: 20Mi node: name: csi-nfs-node dnsPolicy: ClusterFirstWithHostNet # available values: Default, ClusterFirstWithHostNet, ClusterFirst maxUnavailable: 1 logLevel: 5 livenessProbe: healthPort: 29653 affinity: {} nodeSelector: {} priorityClassName: system-cluster-critical tolerations: - operator: &#34;Exists&#34; resources: livenessProbe: limits: memory: 100Mi requests: cpu: 10m memory: 20Mi nodeDriverRegistrar: limits: memory: 100Mi requests: cpu: 10m memory: 20Mi nfs: limits: memory: 300Mi requests: cpu: 10m memory: 20Mi externalSnapshotter: enabled: false name: snapshot-controller priorityClassName: system-cluster-critical deletionPolicy: Delete controller: replicas: 1 resources: limits: memory: 300Mi requests: cpu: 10m memory: 20Mi # Create volume snapshot CRDs. customResourceDefinitions: enabled: true #if set true, VolumeSnapshot, VolumeSnapshotContent and VolumeSnapshotClass CRDs will be created. Set it false, If they already exist in cluster. ## volumeSnapshotClass resource example: volumeSnapshotClass: create: false name: csi-nfs-snapclass deletionPolicy: Delete ## Reference to one or more secrets to be used when pulling images ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/ ## imagePullSecrets: [] # - name: &#34;image-pull-secret&#34; ## StorageClass resource example: storageClass: create: false # name: nfs-csi # annotations: # storageclass.kubernetes.io/is-default-class: &#34;true&#34; # parameters: # server: nfs-server.default.svc.cluster.local # share: / # subDir: # mountPermissions: &#34;0&#34; # csi.storage.k8s.io/provisioner-secret is only needed for providing mountOptions in DeleteVolume # csi.storage.k8s.io/provisioner-secret-name: &#34;mount-options&#34; # csi.storage.k8s.io/provisioner-secret-namespace: &#34;default&#34; # reclaimPolicy: Delete # volumeBindingMode: Immediate # mountOptions: # - nfsvers=4.1 # sc-nfs.yaml --- apiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: nfs-csi provisioner: nfs.csi.k8s.io parameters: server: x.x.x.x share: /mnt/***/*** reclaimPolicy: Delete volumeBindingMode: Immediate mountOptions: - hard - nfsvers=4.1 - nolock --- " />
<meta property="og:url" content="/manifests/nfs/" />
<meta property="og:site_name" content="Tdebian" />

  
    <meta property="og:image" content="/img/favicon/blue.png">
  

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2025-04-12 22:00:00 &#43;0000 UTC" />













  


</head>
<body class="blue">




<div class="container headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Tdebian
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/manifests">Manifests</a></li>
        
      
        
          <li><a href="/posts">Posts</a></li>
        
      
        
          <li><a href="/scripts">Scripts</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
      
        
          <li><a href="/manifests" >Manifests</a></li>
        
      
        
          <li><a href="/posts" >Posts</a></li>
        
      
        
          <li><a href="/scripts" >Scripts</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="/manifests/nfs/">nfs server stuf</a>
  </h1>
  <div class="post-meta"><time class="post-date">2025-04-12</time>
    
</div>

  
  



  

  <div class="post-content"><div>
        <p>Using the csi-driver-nfs from a helm install, creating a storage class, and then a pvc on my nas. The nas and the debian server are plugged into the same switch with cat5e cable so it works out pretty well.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e">#values.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">customLabels</span>: {}
</span></span><span style="display:flex;"><span><span style="color:#f92672">image</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">baseRepo</span>: <span style="color:#ae81ff">registry.k8s.io</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">nfs</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">repository</span>: <span style="color:#ae81ff">registry.k8s.io/sig-storage/nfsplugin</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">tag</span>: <span style="color:#ae81ff">v4.11.0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">pullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">csiProvisioner</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">repository</span>: <span style="color:#ae81ff">registry.k8s.io/sig-storage/csi-provisioner</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">tag</span>: <span style="color:#ae81ff">v5.2.0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">pullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">csiResizer</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">repository</span>: <span style="color:#ae81ff">registry.k8s.io/sig-storage/csi-resizer</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">tag</span>: <span style="color:#ae81ff">v1.13.1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">pullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">csiSnapshotter</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">repository</span>: <span style="color:#ae81ff">registry.k8s.io/sig-storage/csi-snapshotter</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">tag</span>: <span style="color:#ae81ff">v8.2.0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">pullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">livenessProbe</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">repository</span>: <span style="color:#ae81ff">registry.k8s.io/sig-storage/livenessprobe</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">tag</span>: <span style="color:#ae81ff">v2.15.0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">pullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">nodeDriverRegistrar</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">repository</span>: <span style="color:#ae81ff">registry.k8s.io/sig-storage/csi-node-driver-registrar</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">tag</span>: <span style="color:#ae81ff">v2.13.0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">pullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">externalSnapshotter</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">repository</span>: <span style="color:#ae81ff">registry.k8s.io/sig-storage/snapshot-controller</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">tag</span>: <span style="color:#ae81ff">v8.2.0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">pullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">serviceAccount</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">create</span>: <span style="color:#66d9ef">true</span> <span style="color:#75715e"># When true, service accounts will be created for you. Set to false if you want to use your own.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">controller</span>: <span style="color:#ae81ff">csi-nfs-controller-sa</span> <span style="color:#75715e"># Name of Service Account to be created or used</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">node</span>: <span style="color:#ae81ff">csi-nfs-node-sa</span> <span style="color:#75715e"># Name of Service Account to be created or used</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">rbac</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">create</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nfs</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">driver</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nfs.csi.k8s.io</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">mountPermissions</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">feature</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enableFSGroupPolicy</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enableInlineVolume</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">propagateHostMountOptions</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kubeletDir</span>: <span style="color:#ae81ff">/var/lib/kubelet</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">controller</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">csi-nfs-controller</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">strategyType</span>: <span style="color:#ae81ff">Recreate</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">runOnMaster</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">runOnControlPlane</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enableSnapshotter</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">useTarCommandInSnapshot</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">livenessProbe</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">healthPort</span>: <span style="color:#ae81ff">29652</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">logLevel</span>: <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">workingMountDir</span>: <span style="color:#ae81ff">/tmp</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">dnsPolicy: ClusterFirstWithHostNet  # available values</span>: <span style="color:#ae81ff">Default, ClusterFirstWithHostNet, ClusterFirst</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">defaultOnDeletePolicy: delete  # available values</span>: <span style="color:#ae81ff">delete, retain</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">affinity</span>: {}
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nodeSelector</span>: {}
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">priorityClassName</span>: <span style="color:#ae81ff">system-cluster-critical</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">tolerations</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">key</span>: <span style="color:#e6db74">&#34;node-role.kubernetes.io/master&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">operator</span>: <span style="color:#e6db74">&#34;Exists&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">effect</span>: <span style="color:#e6db74">&#34;NoSchedule&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">key</span>: <span style="color:#e6db74">&#34;node-role.kubernetes.io/controlplane&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">operator</span>: <span style="color:#e6db74">&#34;Exists&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">effect</span>: <span style="color:#e6db74">&#34;NoSchedule&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">key</span>: <span style="color:#e6db74">&#34;node-role.kubernetes.io/control-plane&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">operator</span>: <span style="color:#e6db74">&#34;Exists&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">effect</span>: <span style="color:#e6db74">&#34;NoSchedule&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">key</span>: <span style="color:#e6db74">&#34;CriticalAddonsOnly&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">operator</span>: <span style="color:#e6db74">&#34;Exists&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">effect</span>: <span style="color:#e6db74">&#34;NoSchedule&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">csiProvisioner</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">400Mi</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">20Mi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">csiResizer</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">400Mi</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">20Mi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">csiSnapshotter</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">200Mi</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">20Mi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">livenessProbe</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">100Mi</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">20Mi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">nfs</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">200Mi</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">20Mi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">node</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">csi-nfs-node</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">dnsPolicy: ClusterFirstWithHostNet  # available values</span>: <span style="color:#ae81ff">Default, ClusterFirstWithHostNet, ClusterFirst</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">maxUnavailable</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">logLevel</span>: <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">livenessProbe</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">healthPort</span>: <span style="color:#ae81ff">29653</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">affinity</span>: {}
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nodeSelector</span>: {}
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">priorityClassName</span>: <span style="color:#ae81ff">system-cluster-critical</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">tolerations</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">operator</span>: <span style="color:#e6db74">&#34;Exists&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">livenessProbe</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">100Mi</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">20Mi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">nodeDriverRegistrar</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">100Mi</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">20Mi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">nfs</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">300Mi</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">20Mi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">externalSnapshotter</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">snapshot-controller</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">priorityClassName</span>: <span style="color:#ae81ff">system-cluster-critical</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">deletionPolicy</span>: <span style="color:#ae81ff">Delete</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">controller</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">300Mi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">20Mi</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Create volume snapshot CRDs.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">customResourceDefinitions</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>   <span style="color:#75715e">#if set true, VolumeSnapshot, VolumeSnapshotContent and VolumeSnapshotClass CRDs will be created. Set it false, If they already exist in cluster.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## volumeSnapshotClass resource example:</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">volumeSnapshotClass</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">create</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">csi-nfs-snapclass</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">deletionPolicy</span>: <span style="color:#ae81ff">Delete</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Reference to one or more secrets to be used when pulling images</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">imagePullSecrets</span>: []
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - name: &#34;image-pull-secret&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## StorageClass resource example:</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">storageClass</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">create</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   name: nfs-csi</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   annotations:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     storageclass.kubernetes.io/is-default-class: &#34;true&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   parameters:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     server: nfs-server.default.svc.cluster.local</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     share: /</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     subDir:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     mountPermissions: &#34;0&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     csi.storage.k8s.io/provisioner-secret is only needed for providing mountOptions in DeleteVolume</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     csi.storage.k8s.io/provisioner-secret-name: &#34;mount-options&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     csi.storage.k8s.io/provisioner-secret-namespace: &#34;default&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   reclaimPolicy: Delete</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   volumeBindingMode: Immediate</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   mountOptions:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     - nfsvers=4.1</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># sc-nfs.yaml</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">storage.k8s.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">StorageClass</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nfs-csi</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">provisioner</span>: <span style="color:#ae81ff">nfs.csi.k8s.io</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">parameters</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">server</span>: <span style="color:#ae81ff">x.x.x.x</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">share</span>: <span style="color:#ae81ff">/mnt/***/***</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">reclaimPolicy</span>: <span style="color:#ae81ff">Delete</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">volumeBindingMode</span>: <span style="color:#ae81ff">Immediate</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">mountOptions</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">hard</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">nfsvers=4.1</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">nolock</span>
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></div>
      </div></div>

  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2025 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/mirus-ua/hugo-theme-re-terminal" target="_blank">Theme</a> made by <a href="https://github.com/mirus-ua" target="_blank">Mirus</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>








  
</div>

</body>
</html>
